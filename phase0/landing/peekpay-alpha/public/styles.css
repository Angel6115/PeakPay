/* ===== Design Tokens ===== */
:root{
  --bg:#0b0f19; --bg-elev:#111827; --card:#0f1629; --text:#e5e7eb; --muted:#94a3b8; --ring:#1f2937;
  --primary:#6d8cff; --primary-ink:#3143a7; --cta:#111827; --cta-contrast:#0b1020;
  --ok:#22c55e; --err:#ef4444; --warn:#f59e0b;
  --chip:#0e1526; --chip-ring:#1b2540; --badge:#0e1424; --badge-ring:#1b2746;
  --radius-sm:10px; --radius-md:14px; --radius-lg:16px;
  --shadow-1:0 1px 2px rgba(0,0,0,.25), 0 8px 24px rgba(0,0,0,.22);
  --shadow-2:0 2px 8px rgba(0,0,0,.25), 0 16px 40px rgba(0,0,0,.28);
  --shimmer1:#0e1524; --shimmer2:#0f192e; --shimmer3:#0b1120;
}

/* Light theme (activaremos el toggle luego) */
.theme-light{
  --bg:#ffffff; --text:#0b1020; --muted:#475569; --card:#f8fafc; --ring:#e2e8f0;
  --primary:#4f46e5; --primary-ink:#3730a3;
  --chip:#f3f6ff; --chip-ring:#e5e7eb; --badge:#f8fafc; --badge-ring:#e5e7eb;
  --ok:#059669; --err:#b91c1c; --warn:#b45309;
  --shadow-1:0 1px 2px rgba(0,0,0,.05), 0 8px 24px rgba(0,0,0,.06);
  --shadow-2:0 2px 8px rgba(0,0,0,.06), 0 16px 40px rgba(0,0,0,.10);
}

@media (prefers-color-scheme: light){
  :root:not(.force-dark) { color-scheme: light; }
  body:not(.force-dark):not(.theme-light) { background:#fff; color:#0b1020; }
}

/* ===== Base ===== */
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Ubuntu, Arial, sans-serif;
  background: var(--bg); color: var(--text);
  -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;
}
a{ color:inherit; text-decoration:none }
a:hover{ text-decoration: underline }
.wrap{ max-width:1024px; margin:0 auto; padding:28px 16px 56px }

/* Header */
header{ display:flex; gap:12px; align-items:center; justify-content:space-between; }
header img{ width:36px; height:36px; border-radius:12px; object-fit:cover; box-shadow: var(--shadow-1); }
.brand{ font-size:12px; color:var(--muted) }
.brand .crumbs a{ opacity:.95 }
.brand .crumbs a:hover{ text-decoration:underline }

/* Panels / Cards */
.panel{
  border:1px solid var(--ring);
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 92%, transparent) 0%, var(--card) 100%);
  border-radius: var(--radius-lg);
  padding:16px; margin-top:12px; box-shadow: var(--shadow-1);
}

/* Rows / chips / badges */
.row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap }
.badge{
  font-size:12px; line-height:1; border:1px solid var(--badge-ring); background: var(--badge);
  border-radius:999px; padding:7px 12px; display:inline-flex; align-items:center; gap:6px;
  box-shadow: inset 0 -1px 0 rgba(255,255,255,.03);
}
.chip{
  font-size:12px; line-height:1; border:1px solid var(--chip-ring); background: var(--chip);
  padding:6px 10px; border-radius:999px;
}
.badge b, .chip b{ font-weight:700 }

/* Buttons */
.btn{
  border:1px solid transparent; background: var(--primary); color:#fff;
  padding:10px 14px; border-radius: var(--radius-sm); cursor:pointer;
  box-shadow: var(--shadow-1); transition: transform .05s ease, box-shadow .2s ease, filter .15s ease;
}
.btn:hover{ filter: brightness(1.05) }
.btn:active{ transform: translateY(1px) }
.btn:focus-visible{ outline:2px solid color-mix(in srgb, var(--primary) 60%, white); outline-offset:2px; }
.btn.secondary{ background:transparent; border:1px solid var(--ring); color:var(--text); }
.btn[disabled]{ opacity:.6; cursor:not-allowed }

/* Packs grid */
.grid{ display:grid; grid-template-columns: repeat(3, minmax(0,1fr)); gap:10px }
.pack{
  border:1px solid var(--ring);
  background: linear-gradient(180deg, color-mix(in srgb, var(--card) 92%, transparent) 0%, var(--card) 100%);
  color: var(--text); border-radius:14px; padding:14px; cursor:pointer; text-align:center;
  box-shadow: var(--shadow-1);
  transition: transform .06s ease, box-shadow .2s ease, border-color .2s ease;
}
.pack:hover{ transform: translateY(-1px); box-shadow: var(--shadow-2); border-color: color-mix(in srgb, var(--primary) 40%, var(--ring)); }
.pack small{ display:block; opacity:.75 }

/* Messages */
.msg{ margin-top:8px; font-size:13px; min-height:18px }
.ok{ color: var(--ok) } .err{ color: var(--err) }

/* History */
.hist{ display:flex; flex-direction:column; gap:8px; margin-top:8px }
.item{
  display:flex; justify-content:space-between; align-items:center; gap:12px;
  border:1px solid var(--ring); background:#0c1324; color:var(--text);
  border-radius:12px; padding:12px; box-shadow: var(--shadow-1);
}
.theme-light .item{ background:#fff }
.left{ display:flex; flex-direction:column; gap:2px }
.title{ font-weight:600 } .sub{ font-size:12px; color:var(--muted) }
.pill{ display:inline-block; font-size:11px; border:1px solid var(--chip-ring); background:var(--chip); color:var(--text); border-radius:999px; padding:3px 8px; margin-right:6px; }
.cr-pos{ color: var(--ok); font-weight:700 } .cr-neg{ color: var(--err); font-weight:700 }

/* Streak */
.streak{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin-top:10px }
.bar{ flex:1; height:8px; background:#0d1729; border-radius:999px; overflow:hidden; min-width:160px; border:1px solid var(--ring) }
.bar>span{ display:block; height:100%; background: linear-gradient(90deg, var(--primary), #8ea2ff); width:0% }
.streak .tips{ font-size:12px; color: var(--muted) }

/* Peek grid shimmer (compat con tus HTML) */
.cell .img.loading{
  background: linear-gradient(90deg, var(--shimmer1), var(--shimmer2), var(--shimmer3));
  background-size: 200% 100%;
  animation: shimmer 1.1s linear infinite;
}
@keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

/* Header “back” */
header .back{
  border:1px solid var(--ring); background: var(--primary); color:#fff;
  border-radius:10px; padding:8px 12px; text-decoration:none; box-shadow: var(--shadow-1);
}
header .back:hover{ filter: brightness(1.05) }

/* Responsive */
@media (max-width: 720px){ .grid{ grid-template-columns: 1fr; } }
